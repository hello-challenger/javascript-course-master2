<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="../css/style.css">
	<link rel="icon" type="image/png" href="../javascript_128x128.png" sizes="128x128" />
	<title>JavaScript The Objects</title>
	<script language="javascript">
		//_________________
		//Mode non strict
		function func() {
			console.dir(this); //window
		}

		func();
		//_________________
		//Mode srtict
		"use strict"
		function func() {
			console.dir(this); //undefined
		}

		func();
	</script>
</head>

<body>
	<main>
		<div class="cadre">
			<img src="../img/javascript.png" alt="javascript avec le code function">
			<a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Operators/this" target="_blank">
				<h1>This</h1>
			</a>

			<p>A function's this keyword behaves a little differently in JavaScript compared to other languages. It also
				has some
				differences between strict mode and non-strict mode.

				In most cases, the value of this is determined by how a function is called (runtime binding). It can't
				be set by
				assignment during execution, and it may be different each time the function is called. ES5 introduced
				the bind() method
				to set the value of a function's this regardless of how it's called, and ES2015 introduced arrow
				functions which don't
				provide their own this binding (it retains the this value of the enclosing lexical context).
			</p>
		</div>
	</main>
	<script>
		//exemple1 => this est l'objet qui appartient à la méthode.
		var obj = {
			name: 'obj',
			getname: function () {
				console.log(this);
				return this.name
			}
		}

		obj.getname();
		//______________
		//exemple2 => this représente l'objet nouvellement créer
		var obj1 = function () {
			this.name = "obj1";

			this.getName = function () {
				console.log(this);
				return this.name
			}
		}

		var o = new obj1();
		o.getName();
		//______________
		//exemple3 => this prend la valeur au moment de l'éxecution du code asynchrone.
		var Obj3 = function () {
			this.name = "DUPONT";
			//sauvegarde de this
			var me = this;
			this.getName = function () {

				setTimeout(function () {
					console.log("2s");
					console.dir(this);
					console.dir(me);//récupération de l'objet
				}, 2000);
				console.dir(this);
				return this.name;
			}
		};

		var o1 = new Obj3();
		console.log(o1.getName());
		console.dir(o1.getName());
	</script>

</body>

</html>
